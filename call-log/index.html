<!DOCTYPE html>
<html>
<head>
	<title></title>
	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<h2>Call Logs Update Portal</h2>
		<hr>
		<form>
			<div class="form-group">
				<label>Name:(As in the Excel Sheet)</label>
				<input type="text" class="form-control" id="recName" placeholder="e.g., AnkitaD" />
			</div>
			<div class="form-group">
				<div class="row">
					<div class="col-sm-4">
						<label>Year</label>
						<input type="number" class="form-control" id="year"/>
					</div>
					<div class="col-sm-4">
						<label>Month</label>
						<input type="number" class="form-control" id="month"/>
					</div>
					<div class="col-sm-4">
						<label>Date</label>
						<input type="number" class="form-control" id="date"/>
					</div>
				</div>
				
			</div>
			
		</form>

		<button type="button" class="btn btn-primary" onclick="addLogs()">Add Logs</button>
		<div >
					<label id = "status">Status: </label>
		</div>
	</div>

<script type="text/javascript">
	
	function addLogs(){
		var name = document.getElementById("recName").value;
		console.log(name);
		var year = document.getElementById("year").value;
		var month = document.getElementById("month").value;
		var date = document.getElementById("date").value;
		var message = "https://script.google.com/macros/s/AKfycbykYSP1k3kkstlYq8Q6y5LJRiYkPZG1uGE3fSsM_YN8XWuD1yY/exec?name="+name+"&year="+year+"&month="+month+"&date="+date;
		
		var xhr = new XMLHttpRequest();
xhr.open('GET', message);
		document.getElementById("status").innerHTML="Status: Pending"
		// xhr.open("GET", message, true);
		xhr.onload = function (e) {
		  if (xhr.readyState === 4) {
		    if (xhr.status === 200) {
		      console.log(xhr.responseText);
		      document.getElementById("status").innerHTML="Status: "+xhr.responseText;
		    } else {
		      console.error(xhr.statusText);
		      document.getElementById("status").innerHTML="Status: "+xhr.statusText+". Please contact admin";
		    }
		  }
		};
		xhr.onerror = function (e) {
		  console.error(xhr.statusText);
		};
		xhr.send(null);
	}


</script>

</body>
</html>
